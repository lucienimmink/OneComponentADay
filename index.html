<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>A component a day keeps the doctor away</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/moon.css" />
    <link rel="stylesheet" href="lib/css/monokai.css" />
    <link rel="stylesheet" href="css/reveal-editor.css" />

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi) ? "css/print/pdf.css" : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <script src="plugin/jquery.min.js"></script>
    <script src="plugin/ace.js"></script>
    <script src="js/reveal-editor.js"></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>A component a day keeps the doctor away</h1>
        </section>
        <section>
          <h2>A simple example</h2>
          <pre><code class="hljs html" data-line-numbers><album-art artist="the gathering">
  Fallback
</album-art></code></pre>
          <span class="code-file">File: some-page.html</span>
        </section>
        <section>
          <h2>More example!</h2>
          <pre><code class="hljs html" data-line-numbers><album-art artist="ayreon" album="into the electric castle">
  Fallback
</album-art></code></pre>
          <span class="code-file">File: some-page.html</span>
        </section>
        <section>
          <section>
            <h3>What are web components</h3>
            <img src="img/web-components.webp" alt="Web components" />
          </section>
          <section>
            <h1>Templates</h1>
          </section>
          <section>
            <p>
              The HTML Content Template (<span class="code-element">&lt;template&gt;</span>) element is a mechanism for holding HTML that is not to be rendered
              immediately when a page is loaded but may be instantiated subsequently during runtime using JavaScript.
            </p>
          </section>
          <section>
            <p>Example template</p>
            <pre><code class="hljs html" data-line-numbers><template id="template">
  <div class="card-artist">
    <img class="artist-art" alt="artist" src="img/placeholder.webp">
    <h2>artist name</h2>
    <p class="artist-bio"></p>
  </div>
</template></code></pre>
            <span class="code-file">File: some-page.html</span>
          </section>
          <section>
            <p class="warn">
              This DOM is not live.<br />
              No calls will be made to fetch the image. <br />
              No CSS is applied and if you add a script node, <br />No code is excecuted.
            </p>
          </section>
          <section>
            <p>Use JavaScript to use the template</p>
            <pre><code class="hljs js" data-line-numbers>if ('content' in document.createElement('template')) {
  const template = document.querySelector('#template');

  // clone the template and fill in the values
  const clone = document.importNode(template.content, true);
  clone.querySelector('img').setAttribute('src', url);
  clone.querySelector('h2').textContent = artistName;
  clone.querySelector('.artist-bio').textContent = bio;

  // now we can add it to the DOM
  document.querySelector('body').appendChild(clone);
}</code></pre>
            <span class="code-file">File: some-script.js</span>
          </section>
          <section>
            <p class="warn">
              Once added to live DOM the image is fetched <br />
              CSS is applied to the nodes <br />
              The script(s) are excecuted.
            </p>
          </section>
          <section>
            <h1>Custom Elements</h1>
          </section>
          <section>
            <p>
              The ability to create custom elements that encapsulate your functionality on an HTML page, rather than having to make do with a long, nested batch
              of elements that together provide a custom page feature
            </p>
          </section>
          <section>
            <p>Create custom element by extending an HTML element</p>
            <pre><code class="hljs js" data-line-numbers>class AlbumArt extends HTMLElement {
    constructor() {
        // Always call super first
        super();

        // add your magic
    }
}</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>Registering the element is a one-liner</p>
            <pre><code class="hljs js" data-line-numbers>customElements.define('album-art', AlbumArt);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>Customized built-in elements</p>
            <pre><code class="hljs js" data-line-numbers>class List extends HTMLULElement {
    // enter code here; but think of the consequences
    // do you really need to extend a built-in element?
    // how it that not confusing ðŸ¤·
};
customElements.define('list', List, { extends: "ul" });</code></pre>
            <span class="code-file">File: my-custom-built-in-element.js</span>
          </section>
          <section>
            <p>Now we can use it anywhere</p>
            <pre><code class="hljs html" data-line-numbers="3"><article class="artist-info">
    <p>Lorem ipsizzle get down get down sizzle amizzle</p>
    <album-art artist="2pac"></album-art>
    <p>Nullam sapien velizzle, crazy volutpizzle, fo shizzle.</p>
</article></code></pre>
            <span class="code-file">File: alien-page.html</span>
          </section>
          <section>
            <h3>Lifecycle callbacks</h3>
            <ul>
              <li class="code-element">connectedCallback</li>
              <li class="code-element">disconnectedCallback</li>
              <li class="code-element">adoptedCallback</li>
              <li class="code-element">attributeChangedCallback</li>
            </ul>
          </section>
          <section>
            <h1>Shadow DOM</h1>
          </section>
          <section>
            <p>Shadow DOM allows hidden DOM trees to be attached to elements in the regular DOM tree</p>
          </section>
          <section>
            <img src="img/shadow-dom.webp" alt="shadow dom explanation" />
          </section>
          <section>
            <p>Attach a shadow DOM inside a custom element</p>
            <pre><code class="hljs js" data-line-numbers>const shadow = this.attachShadow({mode: 'open'});</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>Now we can create the DOM</p>
            <pre><code class="hljs js" data-line-numbers>const wrapper = document.createElement('div');
wrapper.classList.add('wrapper');
const image = document.createElement('img');

// use the img attributre of the custom element if present
let imageUrl = 'img/placeholder.webp';
if (this.hasAttribute('img')) {
    imageUrl = this.getAttribute('img');
}
image.src = imageUrl;

// add the new elements to the shadow DOM
wrapper.appendChild(image);
shadow.appendChild(wrapper);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>and add styling to it by using CSS</p>
            <pre><code class="hljs js" data-line-numbers>const styleElem = document.createElement('style');
styleElem.textContent = `
.wrapper {
    position: relative;
}
img {
    display: block;
    object-fit: cover;
}`;
shadow.appendChild(styleElem);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>Which could also be external</p>
            <pre><code class="hljs js" data-line-numbers>const linkElem = document.createElement('link');
linkElem.setAttribute('rel', 'stylesheet');
linkElem.setAttribute('href', 'style.css');

shadow.appendChild(linkElem);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
        </section>
      </div>
    </div>
    <div class="editor-hook"></div>

    <script src="js/reveal.js"></script>

    <script>
      Reveal.initialize({
        controls: false,
        progress: false,
        history: true,
        dependencies: [{ src: "plugin/notes/notes.js", async: true }, { src: "plugin/highlight/highlight.js", async: true }],
      });

      $("code").RevealEditor();
    </script>
  </body>
</html>
