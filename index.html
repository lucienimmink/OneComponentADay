<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>A component a day keeps the doctor away</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/league.css" />
    <link rel="stylesheet" href="lib/css/monokai.css" />
    <link rel="stylesheet" href="css/reveal-editor.css" />

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi) ? "css/print/pdf.css" : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <script src="plugin/jquery.min.js"></script>
    <script src="plugin/ace.js"></script>
    <script src="js/reveal-editor.js"></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-group="title">
          <h1><span class="emoji">1Ô∏è</span> component a üìÖ <br />keeps the üë®‚Äç‚öïÔ∏è/üë©‚Äç‚öïÔ∏è away</h1>
        </section>
        <section data-group="intro">
          <section>
            <blockquote>
              I'd like to display album art <br />
              Here is my artist and album name
            </blockquote>
          </section>
          <section>
            <p>A simple statement but it requires some work</p>
            <ul>
              <li class="fragment">Fix spelling mistakes</li>
              <li class="fragment">Find the album art online</li>
              <li class="fragment">Add caching to sequential calls to the same art</li>
              <li class="fragment">Optimize the image for the required dimensions</li>
              <li class="fragment">...</li>
              <li class="fragment">All without bothering the developer</li>
            </ul>
          </section>
          <section>
            <p>We can write the logic and present it as a script</p>
            <pre><code class="hljs js">const albumArt = ({artist, album}) => {
  let magic;
  // do magic, magic will return an &lt;img&gt; tag
  return magic;
}</code></pre>
            <span class="code-file">File: album-art.js</span>
          </section>
          <section>
            <p>and use that script in a page</p>
            <pre><code class="hljs html">&lt;script src="//my-domain.example.com/albuma-art.js">&lt;/script>

<div id="art"></div>

&lt;script>
  (() => {
    const art = albumArt({artist: 'tool', album: 'fear inoculum'});
    document.querySelector("#art").innerHTML = art;
  })();
&lt;/script>
</code></pre>
            <span class="code-file">File: alien-page.html</span>
          </section>
          <section>
            <p>This works, until it becomes to complex</p>
            <ul>
              <li class="fragment">Doing a datepicker this way requires a lot of shared knowledge</li>
              <li class="fragment">Or a lot of copy-pasting</li>
              <li class="fragment">Who is responsible for the styling?</li>
            </ul>
          </section>
          <section>
            <h2>Just make it a <span class="code-element">[insert favourite framework here]</span> component!</h2>
          </section>
          <section>
            <h2>... but we use <span class="code-element">[insert other framework here]</span></h2>
          </section>
          <section>
            <blockquote>
              Have fun rewriting your <span class="code-element">[insert enormous component here]</span> using
              <span class="code-element">[insert other framework here]</span> <br />
              <br />
              I'm off for a üç∫ or üçª
            </blockquote>
            <span class="small fragment">your least favourite co-worker or boss type of person</span>
          </section>
        </section>
        <section data-group="ISAAC - Lucien Immink">
          <section>
            <h2>Lucien Immink, B.Eng</h2>
            <span class="fragment small">Hopefully not that least favourite person I was referring to</span>
          </section>
          <section>
            <img src="img/lucien-square.webp" alt="Lucien Immink, B.Eng" />
          </section>
          <section>
            Software Architect<br />
            Web Evangelist<br />
            @ <em>ISAAC</em>
          </section>
          <section>
            <div id="google-maps">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d70.49368579825386!2d5.463075369060892!3d51.4512164400623!2m3!1f0!2f45.04469628013218!3f0!3m2!1i1024!2i768!4f35!3m3!1m2!1s0x47c6d93fcde42b59%3A0xb1fdab2a93bde85d!2sISAAC!5e1!3m2!1sen!2snl!4v1571839417768!5m2!1sen!2snl"
                width="600"
                height="450"
                frameborder="0"
                style="border:0;"
                allowfullscreen=""
              ></iframe>
            </div>
          </section>
        </section>
        <section data-group="what-are">
          <section>
            <h3>What are web components</h3>
            <img src="img/web-components.webp" alt="Web components" />
          </section>
          <section>
            <h1>Templates</h1>
          </section>
          <section>
            <p>
              The HTML Content Template (<span class="code-element">&lt;template&gt;</span>) element is a mechanism for holding HTML that is not to be rendered
              immediately when a page is loaded but may be instantiated subsequently during runtime using JavaScript.
            </p>
          </section>
          <section>
            <p>Example template</p>
            <pre><code class="hljs html" data-line-numbers><template id="template">
  <div class="card card-artist">
    <img class="card-img-top" alt="artist" src="img/placeholder.webp">
    <p class="card-body">
      <slot name="artist">artist name</slot>
      <slot name="bio">artist bio</slot>
    </p>
  </div>
</template></code></pre>
            <span class="code-file">File: some-page.html</span>
          </section>
          <section>
            <p class="warn">
              This DOM is not live.<br />
              No calls will be made to fetch the image. <br />
              No CSS is applied and if you add a script node, <br />
              No code is excecuted.<br />
              <span class="code-element">&lt;slot&gt;</span> is used as hook to place external HTML
            </p>
          </section>
          <section>
            <p>Use JavaScript to use the template</p>
            <pre><code class="hljs js" data-line-numbers>if ('content' in document.createElement('template')) {
  const template = document.querySelector('#template');

  // clone the template and fill in the values
  const clone = document.importNode(template.content, true);
  clone.querySelector('.card-img-top').setAttribute('src', url);
  ...
  // now we can add it to the DOM
  document.querySelector('body').appendChild(clone);
}</code></pre>
            <span class="code-file">File: some-script.js</span>
          </section>
          <section>
            <p class="warn">
              Once added to live DOM the image is fetched <br />
              CSS is applied to the nodes <br />
              The script(s) are excecuted.
            </p>
          </section>
          <section>
            <h1>Custom Elements</h1>
          </section>
          <section>
            <p>
              The ability to create custom elements that encapsulate your functionality on an HTML page, rather than having to make do with a long, nested batch
              of elements that together provide a custom page feature
            </p>
          </section>
          <section>
            <p>Create custom element by extending an HTML element</p>
            <pre><code class="hljs js" data-line-numbers>class AlbumArt extends HTMLElement {
  constructor() {
    // Always call super first
    super();

    // add your magic
  }
}</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>Registering the element is a one-liner</p>
            <pre><code class="hljs js" data-line-numbers>customElements.define('album-art', AlbumArt);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>Customize built-in elements</p>
            <pre><code class="hljs js" data-line-numbers>class List extends HTMLULElement {
  // enter code here; but think of the consequences
  // do you really need to extend a built-in element?
  // how it that not confusing ü§∑
};
customElements.define('list', List, { extends: "ul" });</code></pre>
            <span class="code-file">File: my-custom-built-in-element.js</span>
          </section>
          <section>
            <p>Now we can use it anywhere</p>
            <pre><code class="hljs html" data-line-numbers="3-5"><article class="artist-info">
  <p>Lorem ipsizzle get down get down sizzle amizzle</p>
  <album-art artist="2pac">
    <h2 slot="artist">2pac</h2>
  </album-art>
  <p>Nullam sapien velizzle, crazy volutpizzle, fo shizzle.</p>
</article></code></pre>
            <span class="code-file">File: alien-page.html</span>
          </section>
          <section>
            <h3>Lifecycle callbacks</h3>
            <ul>
              <li class="code-element">connectedCallback</li>
              <li class="code-element">disconnectedCallback</li>
              <li class="code-element">adoptedCallback</li>
              <li class="code-element">attributeChangedCallback</li>
            </ul>
          </section>
          <section>
            <h1>Shadow DOM</h1>
          </section>
          <section>
            <p>Shadow DOM allows hidden DOM trees to be attached to elements in the regular DOM tree</p>
          </section>
          <section>
            <img src="img/shadow-dom.webp" alt="shadow dom explanation" />
          </section>
          <section>
            <p>Attach a shadow DOM inside a custom element</p>
            <pre><code class="hljs js" data-line-numbers>const shadow = this.attachShadow({mode: 'open'});</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
            <p class="fragment small">Open: Elements of the shadow root are accessible from JavaScript outside the root</p>
            <p class="fragment small">Closed: Denies access to the node(s) of a closed shadow root from JavaScript outside it</p>
          </section>
          <section>
            <p>Now we can create the DOM</p>
            <pre><code class="hljs js" data-line-numbers>const wrapper = document.createElement('div');
wrapper.classList.add('wrapper');
const image = document.createElement('img');

// use the img attributre of the custom element if present
let imageUrl = 'img/placeholder.webp';
if (this.hasAttribute('img')) {
  imageUrl = this.getAttribute('img');
}
image.src = imageUrl;

// add the new elements to the shadow DOM
wrapper.appendChild(image);
shadow.appendChild(wrapper);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>and add styling to it by using CSS</p>
            <pre><code class="hljs js" data-line-numbers>const styleElem = document.createElement('style');
styleElem.textContent = `
  .wrapper {
    position: relative;
  }
  img {
    display: block;
    object-fit: cover;
}`;
shadow.appendChild(styleElem);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p>Which could also be external</p>
            <pre><code class="hljs js" data-line-numbers>const linkElem = document.createElement('link');
linkElem.setAttribute('rel', 'stylesheet');
linkElem.setAttribute('href', 'style.css');

shadow.appendChild(linkElem);</code></pre>
            <span class="code-file">File: my-custom-element.js</span>
          </section>
          <section>
            <p class="warn">
              Please pay attention if you load CSS this way <br />
              What is the URL? ü§î <br />
              <span class="fragment">Only use <strong>Absolute URIs</strong> <br /></span>
              <span class="fragment">Or better yet, not at all</span>
            </p>
          </section>
          <section>
            <h2>üö® V0 vs V1 üö®</h2>
          </section>
          <section>
            <h3>Web components V0</h3>
            <ul>
              <li>Are out-dated</li>
              <li>Should not be used anymore</li>
              <li>Only worked in Chrome</li>
            </ul>
          </section>
          <section>
            <h3>Check if V0 is available</h3>
            <pre><code class="hljs js">console.log(
"Native HTML Imports?", 'import' in document.createElement('link'),
"Native Custom Elements v0?", 'registerElement' in document,
"Native Shadow DOM v0?", 'createShadowRoot' in document.createElement('div'));</code></pre>
            <img src="img/v0-enabled.webp" alt="check in browser if V0 APIs are available" />
          </section>
          <section>
            <h3>Deprecation warning when using V0</h3>
            <img src="img/v0-deprecated-warning.webp" alt="deprecation warning when using V0" />
          </section>
        </section>
        <section data-group="integrate">
          <section>
            <h2>Integrate</h2>
          </section>
          <section>
            <h3>Angular</h3>
            <pre><code class="hljs js" data-line-numbers="1,4">import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from "@angular/core";
@NgModule({
  ...,
  schemas: [CUSTOM_ELEMENTS_SCHEMA],
})</code></pre>
            <span class="code-file">File: app.module.ts</span>
          </section>
          <section>
            <h3>Angular - 2</h3>
            <pre><code class="hljs js">import "album-art-component";</code></pre>
            <span class="code-file">File: your-angular-component.ts</span>
          </section>
          <section>
            <h3>Angular - 3</h3>
            <pre><code class="hljs html"><album-art [album]="album.name" [artist]="artist.name"></album-art></code></pre>
            <span class="code-file">File: your-angular-component.html</span>
          </section>
          <section>
            <h3>React</h3>
            <pre><code class="hljs js" data-line-numbers="1,5">import "album-art-component";
class AlbumArt extends React.Component {
  render() {
    return (
      <album-art artist={this.props.artist.name}></album-art>
    );
  }
}</code></pre>
          </section>
          <section>
            <h3>Vue</h3>
            <pre><code class="hljs js" data-line-numbers>Vue.config.ignoredElements = [/album-art/];</code></pre>
            <span class="code-file">File: main.js</span>
          </section>
          <section>
            <h3>Vue - 2</h3>
            <pre><code class="hljs js" data-line-numbers="2,5"><template>
  <album-art :album="album.name" :artist="artist.name"></album-art>
</template>
<script>
  import "album-art-component";
</script></code></pre>
            <span class="code-file">File: your-vue-component.vue</span>
          </section>
          <section>
            <h2>Tools</h2>
          </section>
          <section>
            <p>Multiple libraries are available, some but not all:</p>
            <ul>
              <li>Polymer</li>
              <li>LitElement</li>
              <li>Stencil.js</li>
            </ul>
          </section>
        </section>
        <section data-group="examples">
          <section>
            <h2>Some examples</h2>
          </section>
          <section>
            <h3>render-plantuml</h3>
            <pre><code class="hljs html" data-line-numbers><render-plantuml server="https://some-server">
  Actor -> "Actor 2" : Hooray an example!
</render-plantuml></code></pre>
            <a href="https://github.com/bauglir/render-plantuml" rel="noopener" target="_blank"
              ><img src="img/render-plantuml-example.webp" alt="API viewer"
            /></a>
          </section>
          <section>
            <h3>api-viewer</h3>
            <pre><code class="hljs html" data-line-numbers><api-viewer src="./custom-elements.json"></api-viewer></code></pre>
            <a href="https://github.com/web-padawan/api-viewer-element" rel="noopener" target="_blank"
              ><img src="img/api-viewer-screenshot.webp" alt="API viewer"
            /></a>
          </section>
          <section>
            <h3>vaadin-date-picker</h3>
            <pre><code class="hljs html" data-line-numbers><vaadin-date-picker label="Birthday" value="1980-08-14"></vaadin-date-picker></code></pre>
            <a href="https://vaadin.com/components/vaadin-date-picker/html-examples" rel="noopener" target="_blank"
              ><img src="img/vaadin-date-picker-screenshot.webp" alt="vaading date-picker"
            /></a>
          </section>
          <section>
            <h3>Utilitie components</h3>
            <ul>
              <li>grid</li>
              <li class="fragment">modal</li>
              <li class="fragment">take-over</li>
              <li class="fragment">wizards</li>
              <li class="fragment">Endless lists</li>
              <li class="fragment">... or virtual</li>
            </ul>
          </section>
          <section>
            <h3>album-art-component</h3>
            <pre><code class="hljs html" data-line-numbers=""><album-art artist="the gathering"></album-art>
<album-art artist="tool" album="fear inoculum"></album-art>
<style>
  album-art {
    display: inline-block;
    width: calc(50% - 3px);
    margin: 0 3px 0 0;
  }
</style></code></pre>
          </section>
        </section>
        <section data-group="closing-thoughts">
          <section>
            <h2>And so it's come to this</h2>
          </section>
          <section>
            <p>
              Web components are a set of web platform APIs that allow you to create new custom, reusable, encapsulated HTML tags to use in web pages and web
              apps.
            </p>
          </section>
          <section>
            <p>
              Custom components and widgets build on the Web Component standards, will work across modern browsers, and can be used with any JavaScript library
              or framework that works with HTML.
            </p>
          </section>
          <section>
            <h3>Web components are</h3>
            <ul>
              <li class="fragment">HTML templates</li>
              <li class="fragment">Custom Elements</li>
              <li class="fragment">Shadow DOM</li>
            </ul>
          </section>
          <section>
            <h3>Web components do</h3>
            <ul>
              <li class="fragment">Integrate well with modern frameworks</li>
              <li class="fragment">Have multiple tools to build</li>
              <li class="fragment">Have a great future</li>
              <li class="fragment">Can fetch album-art ü•≥üéâ</li>
            </ul>
          </section>
        </section>
      </div>
    </div>
    <div class="editor-hook"></div>

    <script src="js/reveal.js"></script>

    <script>
      Reveal.initialize({
        controls: false,
        progress: false,
        history: true,
        dependencies: [
          { src: "plugin/notes/notes.js", async: true },
          { src: "plugin/highlight/highlight.js", async: true },
        ],
      });

      $("code").RevealEditor();
    </script>
  </body>
</html>
